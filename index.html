<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><title>Little Dairy Chef</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id='favicon' rel="shortcut icon" href="./logo.png" type="image/x-png">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');

body {
    font-family: 'Fredoka One', sans-serif;
    overflow-x: hidden;
}

/* Add styles for the logo */
header {
    background-color: #4eb4ed;
    padding: 1rem;
    display: flex; /* Enable flexbox layout */
    justify-content: space-between;
}

header img {
    width: 150px; /* Adjust the width as needed */
    height: auto; /* Maintain aspect ratio */
    margin-right: 1rem; /* Add some spacing between the logo and the title */
}

header h1 {
    color: #c7d7e1;
    margin: 0; /* Remove default margin */
    font-size: 2em
}
form{
    max-width: 900px;
    display: flex;
}

/* Rest of your CSS remains unchanged */

header {
    background-color: #009af0;
    padding: 1rem;
    display: flex;
    align-items: center; /* Center items vertically */
    justify-content: space-around; /* Center items horizontally */
}

header h1 {
    color: #fff;
    display: inline;
}

nav ul {
    display: inline;
    list-style-type: none;
    padding: 0;
}

nav li {
    display: inline;
    margin-left: 1rem;
}

nav a {
    color: #fff;
    text-decoration: none;
}
div{
    margin: 1%;
}
@media (max-width:600px) {
    .a{
        display: none;
    }
    header h1 {
        display: flex !important;
        align-items: start;
        font-size: x-larger;
    }
}
</style>
</head>
<body class="bg-green-100">
    <header>
        <img class="a" src="logo.png" alt="Little Dairy Chef Logo">
        <h1 class="a">Little Dairy Chefâ €</h1>
        <img src="logo.png" alt="Little Dairy Chef Logo">
    </header>
    <div class="container mx-auto py-8">
        <div id="item-cards" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
    </div>
    <center>
        <form id="order-form" class="flex flex-col gap-4 p-4">
            <input type="text" id="name" placeholder="Your Name" class="p-2 border rounded">
            <input type="text" id="Number" placeholder="Phone Number" class="p-2 border rounded">
            <input type="text" id="Additional_text" placeholder="Additional Message" class="p-2 border rounded">
            <button type="button" onclick="order()" class="bg-blue-500 text-white p-2 rounded">Order</button>
            <label id="Total" class="text-lg font-bold"></label>
        </form>
    </center>
    <div id="cart-summary" class="p-4"></div>

    <script>
        const items = [
            { name: "1L yoghurt", type: "piece", price: 4300, image: "./Pics/1L-yoghurt.jpg" },
            { name: "1.5L yoghurt", type: "piece", price: 6200, image: "./Pics/1.5L-yoghurt.jpg" },
            { name: "0.25L yoghurt", type: "piece", price: 1500, image: "./Pics/0.25L-yoghurt.jpg" },
            { name: "0.5L yoghurt", type: "piece", price: 2600, image: "./Pics/0.5L-yoghurt.jpg" },
            { name: "Mozzarella", type: "kg", price: 1500, image: "./Pics/mozzarella.jpg" },
            { name: "Gouda", type: "kg", price: 1500, image: "./Pics/gouda.jpg" },
        ];

        let cart = [];

        const webhookURL = "https://discord.com/api/webhooks/1267214910593564714/sDfcOLK6H1woD93dmsKCiFiOQkBmqR4zjpPy1rKAtDOhXyRNO7v82U-7zkFj4q5mFnyj";

        const TotalPriceLabel = document.getElementById("Total");

        function createItemCards() {
            const itemCardsContainer = document.getElementById("item-cards");
            itemCardsContainer.innerHTML = ""; // Clear existing cards

            items.forEach(item => {
                const card = document.createElement("div");
                card.className = "bg-white shadow-md rounded-lg overflow-hidden";

                const img = document.createElement("img");
                img.src = item.image;
                img.alt = item.name;
                img.className = "w-full h-48 object-cover";

                const cardBody = document.createElement("div");
                cardBody.className = "p-4";

                const itemName = document.createElement("h2");
                itemName.className = "text-xl font-bold mb-2";
                itemName.textContent = item.name;

                const itemPrice = document.createElement("p");
                itemPrice.className = "text-gray-700";
                itemPrice.textContent = `Price: ${item.price.toLocaleString()} ${item.type === "kg" ? "per kg" : "each"}`;

                const quantityContainer = document.createElement("div");
                quantityContainer.className = "flex items-center gap-2 mt-2";

                const quantityInput = document.createElement("input");
                quantityInput.type = "number";
                quantityInput.value = 1;
                quantityInput.min = 1;
                quantityInput.className = "p-2 border rounded w-20";

                const addToCartButton = document.createElement("button");
                addToCartButton.className = "bg-blue-500 text-white px-4 py-2 rounded";
                addToCartButton.textContent = "Add to Cart";
                addToCartButton.addEventListener("click", () => addToCart(item, quantityInput.value));

                quantityContainer.appendChild(quantityInput);
                quantityContainer.appendChild(addToCartButton);

                cardBody.appendChild(itemName);
                cardBody.appendChild(itemPrice);
                cardBody.appendChild(quantityContainer);
                card.appendChild(img);
                card.appendChild(cardBody);
                itemCardsContainer.appendChild(card);
            });
        }

        function addToCart(item, quantity) {
            quantity = parseFloat(quantity);
            if (!quantity || quantity <= 0) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid quantity',
                    text: 'Please enter a valid quantity.',
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                });
                return;
            }

            const cartItem = { ...item, quantity };
            cart.push(cartItem);
            updateTotalPrice();
            createCartSummary();
            Swal.fire({
                icon: 'success',
                title: 'Added to Cart',
                text: `${item.name} has been added to your cart.`,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
            });
        }

        function updateTotalPrice() {
            let totalPrice = 0;
            cart.forEach(item => {
                totalPrice += item.type === "kg" ? (item.price * item.quantity) : (item.price * item.quantity);
            });
            const formattedTotalPrice = Number(totalPrice).toLocaleString();
            TotalPriceLabel.textContent = "Total: " + formattedTotalPrice;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateTotalPrice();
            createCartSummary();
        }

        function createCartSummary() {
            const cartSummaryContainer = document.getElementById("cart-summary");
            cartSummaryContainer.innerHTML = ""; // Clear existing summary

            if (cart.length === 0) {
                cartSummaryContainer.textContent = "Your cart is empty.";
                return;
            }

            cart.forEach((item, index) => {
                const itemDiv = document.createElement("div");
                itemDiv.className = "flex justify-between items-center p-2 border-b";

                const itemDetails = document.createElement("span");
                itemDetails.textContent = `${item.name} (x${item.quantity}) - ${item.price.toLocaleString()}`;

                const removeButton = document.createElement("button");
                removeButton.className = "bg-red-500 text-white px-2 py-1 rounded";
                removeButton.textContent = "Remove";
                removeButton.addEventListener("click", () => removeFromCart(index));

                itemDiv.appendChild(itemDetails);
                itemDiv.appendChild(removeButton);
                cartSummaryContainer.appendChild(itemDiv);
            });
        }

        function order() {
            const name = document.getElementById("name").value;
            const Phone_Number = document.getElementById("Number").value;
            const Additional_text = document.getElementById("Additional_text").value;

            if (!cart.length) {
                Swal.fire({
                    icon: 'error',
                    title: 'Cart is empty',
                    text: 'Please add items to your cart before placing an order.',
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                });
                return;
            }
            if (!name) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid name',
                    text: 'Please enter your name.',
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                });
                return;
            }
            if (!Phone_Number) {
                Swal.fire({
                    icon: 'error',
                    title: 'Invalid Phone Number',
                    text: 'Please enter your phone number.',
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                });
                return;
            }

            const order = {
                name,
                items: cart,
                Phone_Number,
                Additional_text,
            };

            sendOrderToDiscord(order);
            document.getElementById("order-form").reset();
            cart = [];
            TotalPriceLabel.textContent = "Total: 0";
            createCartSummary();
            Swal.fire({
                icon: 'success',
                title: 'Order Placed!',
                text: 'Your order has been successfully placed.',
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
            });
        }

        function sendOrderToDiscord(order) {
            const { name, items, Phone_Number, Additional_text } = order;
            const itemsDetails = items.map(item => `**Item:** ${item.name}, **Quantity:** ${item.quantity}, **Total Price:** ${item.price * item.quantity}`).join('\n');
            const payload = {
                content: `@everyone New order received:\nName: **${name}**\nPhone Number: **${Phone_Number}**\nMessage: **${Additional_text}**\n\nOrder Details:\n${itemsDetails}`,
            };

            fetch(webhookURL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(payload),
            })
            .then((response) => {
                if (!response.ok) {
                    throw new Error("Failed to send order to Discord");
                }
            })
            .catch((error) => {
                console.error("Error:", error);
            });
        }

        // Initial call to create item cards
        createItemCards();
    </script>
</body>
</html>
